<!DOCTYPE html>
<html>

<head>
    <title>Smart Doorbell by Group 1</title>
</head>

<body>
    <form action="" id="loginForm">
        <input name="username" id="username" />
        <input name="password" id="password" />
        <button>Login</button>
    </form>
    <form action="" id="cameraForm">
        <button>Update the camera</button>
    </form>
    <img id="image" width="640" height="480" />
    <p id="messages"></p>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();

        const loginForm = document.getElementById('loginForm');
        const username = document.getElementById('username');
        const password = document.getElementById('password');
        const cameraForm = document.getElementById('cameraForm');
        const image = document.getElementById('image');
        const messages = document.getElementById('messages');

        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            if (username.value && password.value) {
                socket.emit('login', {
                    username: username.value,
                    password: password.value,
                });
                username.value = '';
                password.value = '';
            }
        });

        cameraForm.addEventListener('submit', (e) => {
            e.preventDefault();
            socket.emit('camera');
        });

        socket.on('image', (data) => {
            image.src = data;
        });

        socket.on('message', (msg) => {
            messages.textContent = msg;
        });
    </script>
</body>

</html>